---
const { pathname } = Astro.url;
const pathSegments = pathname.split("/").filter((segment) => segment !== "");

// Build breadcrumb items
const breadcrumbs = pathSegments.map((segment, index) => {
  const href = `/${pathSegments.slice(0, index + 1).join("/")}`;
  const label = segment
    .split("-")
    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
    .join(" ");
  return { label, href };
});

// Add Home as the first item
const allBreadcrumbs = [{ label: "Home", href: "/" }, ...breadcrumbs];
---

{
  allBreadcrumbs.length > 1 && (
    <nav class="mx-auto w-full max-w-[85rem] px-4 pt-24 pb-4 sm:px-6 lg:px-8" aria-label="Breadcrumb">
      <ol class="flex items-center whitespace-nowrap">
        {allBreadcrumbs.map((crumb, index) => (
          <li class="inline-flex items-center">
            {index > 0 && (
              <svg
                class="mx-2 size-4 shrink-0 text-slate-400"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="m9 18 6-6-6-6" />
              </svg>
            )}
            {index === allBreadcrumbs.length - 1 ? (
              <span class="text-sm font-semibold text-slate-800 truncate max-w-[200px] sm:max-w-none" aria-current="page">
                {crumb.label}
              </span>
            ) : (
              <a
                class="flex items-center text-sm text-slate-500 hover:text-teal-600 focus:outline-hidden focus:text-teal-600"
                href={crumb.href}
              >
                {index === 0 && (
                  <svg
                    class="me-2 size-4 shrink-0"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                    <polyline points="9 22 9 12 15 12 15 22" />
                  </svg>
                )}
                {crumb.label}
              </a>
            )}
          </li>
        ))}
      </ol>
    </nav>
  )
}
