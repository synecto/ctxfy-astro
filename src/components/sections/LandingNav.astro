---
import { sanityClient } from "@lib/sanityClient";
import groq from "groq";

const useCases = await sanityClient.fetch(
  groq`*[_type=="useCase" && defined(slug.current)]{ title, "slug": slug.current, subheadline }`
);
---

<header class="nav-wrapper reveal fade">
  <div class="nav-bar">
    <a
      class="brand"
      href="/"
      data-track="nav_click"
      data-track-props='{"item":"brand"}'
    >
      <span class="brand-badge">W</span>
      <span>
        Ctxfy
        <span class="brand-sub">Communicate. Collaborate. Create.</span>
      </span>
    </a>
    <div class="nav-group">
      <nav class="nav-links" aria-label="Primary">
        <a
          class="nav-link"
          href="/#product"
          data-track="nav_click"
          data-track-props='{"item":"platform"}'
        >
          Platform
        </a>
        <div class="nav-item has-mega">
          <button
            class="nav-trigger"
            type="button"
            aria-haspopup="true"
            aria-expanded="false"
            data-track="nav_click"
            data-track-props='{"item":"solutions"}'
          >
            Solutions <span class="nav-caret">▾</span>
          </button>
          <div class="mega-menu" role="menu" aria-label="Solutions">
            <div class="mega-panel">
              <div class="mega-card">
                <div class="mega-card-art"></div>
                <div>
                  <p class="mega-card-title">Solutions that drive</p>
                  <p class="mega-card-copy">
                    Deliver customer value and drive business outcomes.
                  </p>
                </div>
                <a
                  class="mega-card-link"
                  href="/solutions"
                  data-track="nav_click"
                  data-track-props='{"item":"solutions_overview"}'
                >
                  Explore solutions →
                </a>
              </div>
              <div class="mega-columns">
                <div class="mega-col">
                  <p class="mega-col-title">Industry</p>
                  <a
                    class="mega-link"
                    href="/solutions/financial-services"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_finance"}'
                  >
                    <span class="mega-link-title">Financial Services</span>
                    <span class="mega-link-desc">
                      Personalize the banking experience
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/b2b"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_b2b"}'
                  >
                    <span class="mega-link-title">B2B</span>
                    <span class="mega-link-desc">
                      Maximize product adoption
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/media"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_media"}'
                  >
                    <span class="mega-link-title">Media</span>
                    <span class="mega-link-desc">
                      Identify impactful content
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/healthcare"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_healthcare"}'
                  >
                    <span class="mega-link-title">Healthcare</span>
                    <span class="mega-link-desc">
                      Simplify the digital healthcare experience
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/ecommerce"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_ecommerce"}'
                  >
                    <span class="mega-link-title">Ecommerce</span>
                    <span class="mega-link-desc">
                      Optimize for transactions
                    </span>
                  </a>
                </div>
                <div class="mega-col">
                  <p class="mega-col-title">Use Case</p>
                  <a
                    class="mega-link"
                    href="/solutions/acquisition"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_acquisition"}'
                  >
                    <span class="mega-link-title">Acquisition</span>
                    <span class="mega-link-desc">
                      Get users hooked from day one
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/retention"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_retention"}'
                  >
                    <span class="mega-link-title">Retention</span>
                    <span class="mega-link-desc">
                      Understand your customers like no one else
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/monetization"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_monetization"}'
                  >
                    <span class="mega-link-title">Monetization</span>
                    <span class="mega-link-desc">
                      Turn behavior into business
                    </span>
                  </a>
                </div>
                <div class="mega-col">
                  <p class="mega-col-title">Team</p>
                  <a
                    class="mega-link"
                    href="/solutions/product"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_product"}'
                  >
                    <span class="mega-link-title">Product</span>
                    <span class="mega-link-desc">
                      Fuel faster growth
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/data"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_data"}'
                  >
                    <span class="mega-link-title">Data</span>
                    <span class="mega-link-desc">
                      Make trusted data accessible
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/engineering"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_engineering"}'
                  >
                    <span class="mega-link-title">Engineering</span>
                    <span class="mega-link-desc">
                      Ship faster, learn more
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/marketing"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_marketing"}'
                  >
                    <span class="mega-link-title">Marketing</span>
                    <span class="mega-link-desc">
                      Build customers for life
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/executive"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_executive"}'
                  >
                    <span class="mega-link-title">Executive</span>
                    <span class="mega-link-desc">
                      Power decisions, shape the future
                    </span>
                  </a>
                </div>
                <div class="mega-col">
                  <p class="mega-col-title">Size</p>
                  <a
                    class="mega-link"
                    href="/solutions/startups"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_startups"}'
                  >
                    <span class="mega-link-title">Startups</span>
                    <span class="mega-link-desc">
                      Free analytics tools for startups
                    </span>
                  </a>
                  <a
                    class="mega-link"
                    href="/solutions/enterprise"
                    data-track="nav_click"
                    data-track-props='{"item":"solutions_enterprise"}'
                  >
                    <span class="mega-link-title">Enterprise</span>
                    <span class="mega-link-desc">
                      Advanced analytics for scaling businesses
                    </span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="nav-item has-mega">
          <button
            class="nav-trigger"
            type="button"
            aria-haspopup="true"
            aria-expanded="false"
            data-track="nav_click"
            data-track-props='{"item":"use_cases"}'
          >
            Use Cases <span class="nav-caret">▾</span>
          </button>
          <div class="mega-menu" role="menu" aria-label="Use Cases">
            <div class="mega-panel">
              <div class="mega-card">
                <div class="mega-card-art"></div>
                <div>
                  <p class="mega-card-title">Real-world examples</p>
                  <p class="mega-card-copy">
                    See how Ctxfy helps teams across different industries.
                  </p>
                </div>
                <a
                  class="mega-card-link"
                  href="/use-cases"
                  data-track="nav_click"
                  data-track-props='{"item":"use_cases_overview"}'
                >
                  View all use cases →
                </a>
              </div>
              <div class="mega-columns">
                <div class="mega-col">
                  <p class="mega-col-title">Solutions</p>
                  {
                    useCases.map((uc: any) => (
                      <a
                        class="mega-link"
                        href={`/use-cases/${uc.slug}`}
                        data-track="nav_click"
                        data-track-props={JSON.stringify({
                          item: `use_case_${uc.slug}`,
                        })}
                      >
                        <span class="mega-link-title">{uc.title}</span>
                        {uc.subheadline && (
                          <span class="mega-link-desc">{uc.subheadline}</span>
                        )}
                      </a>
                    ))
                  }
                </div>
              </div>
            </div>
          </div>
        </div>

        <a
          class="nav-link"
          href="/docs/"
          data-track="nav_click"
          data-track-props='{"item":"resources"}'
        >
          Resources
        </a>
        <a
          class="nav-link"
          href="/#pricing"
          data-track="nav_click"
          data-track-props='{"item":"pricing"}'
        >
          Pricing
        </a>
      </nav>
      <div class="nav-actions">
        <a
          class="nav-login"
          href="/login"
          data-track="nav_click"
          data-track-props='{"item":"login"}'
        >
          Login
        </a>
        <a
          class="nav-pill"
          href="/#contact"
          data-track="nav_click"
          data-track-props='{"item":"contact_sales"}'
        >
          Contact sales
        </a>
        <a
          class="nav-pill primary"
          href="/#get-started"
          data-track="nav_click"
          data-track-props='{"item":"get_started"}'
        >
          Get started
        </a>
      </div>
    </div>
  </div>
</header>
